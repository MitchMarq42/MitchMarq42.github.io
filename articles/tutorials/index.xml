<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>MitchMarq42 の Blog</title><link>https://mitchmarq42.xyz/articles/tutorials/</link><description>Recent content in Tutorials on MitchMarq42 の Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 15 Nov 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://mitchmarq42.xyz/articles/tutorials/index.xml" rel="self" type="application/rss+xml"/><item><title>Scraping</title><link>https://mitchmarq42.xyz/articles/tutorials/scraping/</link><pubDate>Tue, 30 Nov 2021 00:00:00 +0000</pubDate><guid>https://mitchmarq42.xyz/articles/tutorials/scraping/</guid><description>
&lt;p>(This article is currently incomplete. I will work on it more later.)&lt;/p>
&lt;div id="outline-container-headline-1" class="outline-2">
&lt;h2 id="headline-1">
Using &lt;code class="verbatim">sed&lt;/code> and &lt;code class="verbatim">curl&lt;/code> to extract information from webpages
&lt;/h2>
&lt;div id="outline-text-headline-1" class="outline-text-2">
&lt;p>—-&lt;/p>
&lt;div id="outline-container-headline-2" class="outline-3">
&lt;h3 id="headline-2">
Introduction
&lt;/h3>
&lt;div id="outline-text-headline-2" class="outline-text-3">
&lt;p>I&amp;#39;ll go over a bit more technicalities in my article on &lt;code class="verbatim">grep&lt;/code>, but I wanted to discuss a practical use of UNIX command-line tools. This is also in relation to data-hoarding, but we&amp;#39;ll get into that.&lt;/p>
&lt;/div>
&lt;/div>
&lt;div id="outline-container-headline-3" class="outline-3">
&lt;h3 id="headline-3">
The problem
&lt;/h3>
&lt;div id="outline-text-headline-3" class="outline-text-3">
&lt;p>Detective Conan is a very long-running anime. It is basiscally season-less and has been running more-or-less continuously since 1996. As of the time of writing, there are 1036 episodes out, and every week that number ticks up by one. It&amp;#39;s also not a masterpiece, so about 42% of that is filler.
The easy solution is to just not watch it, but I think we can do better. Here is how I found a list of canon/plot-relevant episodes, and extracted that into something to be used with various other tools at my disposal– and how you can too!&lt;/p>
&lt;p>
&lt;code class="verbatim">=&lt;/code>&lt;/p>
&lt;p>
First we google (or bing, or duck, or brave) for &amp;#34;detective conan list of important episodes&amp;#34;. &lt;a href="https://www.xerblade.com/p/detective-conan-important-episode-list.html?m=0">This&lt;/a> is the top result on Google and Brave, and is thankfully also the one I used in the past to come up with the following procedure.&lt;/p>
&lt;p>
In the browser, it&amp;#39;s a pretty good page. Decorated but tasteful, modern but not bloated. Run basically by one guy, who strives to not use JavaScript as much as possible (an honorable goal).&lt;/p>
&lt;p>
But we&amp;#39;re working in the command line. And on the command line, everything is reduced to plaintext. If you&amp;#39;re lucky enough to not know what HTML looks like, here&amp;#39;s a sample from the aformentioned page (obtained with &lt;code class="verbatim">curl &amp;#39;https://www.xerblade.com/p/detective-conan-important-episode-list.html?m=0&amp;#39;&lt;/code>):&lt;/p>
&lt;div class="src src-html">
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-html" data-lang="html">&lt;span style="display:flex;">&lt;span> &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-pos&amp;#39;&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-no&amp;#39;&lt;/span>&amp;gt;=Main Plot=&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">p&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">li&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">li&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">p&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-pos&amp;#39;&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-no&amp;#39;&lt;/span>&amp;gt;971-974&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; [INTL 1028-1031] (manga 1013-1017|V95F10-V96F3):&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span>&amp;gt;Detective &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Chiba&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; and &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Miike&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; development. &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Kuroda&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; development. &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Amuro&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; development. Plus a development for &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Yumi&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; and &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Shūkichi&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; in the background. &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-pos&amp;#39;&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-no&amp;#39;&lt;/span>&amp;gt;=Main Plot=&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">p&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">li&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">li&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">p&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-pos&amp;#39;&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-no&amp;#39;&lt;/span>&amp;gt;983-984&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; [INTL 1040-1041] (manga 1018-1021|V96F4-7):&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Heiji&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; case, &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Kaitō Kid&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt;, &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Morofushi&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; development, &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Amuro&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; development, and &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Hiromitsu&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; development. &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-pos&amp;#39;&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-no&amp;#39;&lt;/span>&amp;gt;=Main Plot=&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">p&lt;/span>&amp;gt;&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">li&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">li&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">p&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-pos&amp;#39;&lt;/span>&amp;gt;&amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-no&amp;#39;&lt;/span>&amp;gt;993-995&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; [INTL 1050-1052] (manga 1022-1026|V96F8-V97F1):&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Sera Masumi&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; development. Also, &amp;lt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;p>
Sorry. You shouldn&amp;#39;t have had to endure that. In fact, you probably didn&amp;#39;t. I bet your eyes glazed over. In fact, this is just a segment from near the end of a &lt;span style="text-decoration: underline;">huge&lt;/span> pagagraph which actually contains everything we&amp;#39;ve been looking for. Obviously, just reading it like this isn&amp;#39;t really doable. Let&amp;#39;s chop it up into some better pieces.&lt;/p>
&lt;p>
&lt;code class="verbatim">sed&lt;/code> is a stream editor. You give it a stream of text, and it applies a rule or conversion to the text according to the expression you put after it (the first &lt;strong>argument&lt;/strong>.) It is often used for search-and-replace.&lt;/p>
&lt;p>
For example, we can convert every instance of &lt;code class="verbatim">&amp;gt;&amp;lt;&lt;/code> to, say, &lt;code class="verbatim">&amp;gt; &amp;lt;&lt;/code> or better yet to&lt;/p>
&lt;div class="src src-text">
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;p>Here&amp;#39;s the command now:&lt;/p>
&lt;div class="src src-shell">
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span> curl &lt;span style="color:#0086d2">&amp;#39;https://www.xerblade.com/p/detective-conan-important-episode-list.html?m=0&amp;#39;&lt;/span> | sed &lt;span style="color:#0086d2">&amp;#39;s/&amp;gt;&amp;lt;/&amp;gt;\n&amp;lt;/g&amp;#39;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;p>
The &lt;code class="verbatim">s/thing1/thing2/g&lt;/code> tells &lt;code class="verbatim">sed&lt;/code> to _S_ubstitute thing1 with thing2 _G_lobally, every time in the line. Without the &lt;code class="verbatim">g&lt;/code> it would only do the first one (which is useful but not here). That &lt;code class="verbatim">\n&lt;/code> is what&amp;#39;s called a &lt;strong>regular expression&lt;/strong>– this one specifically means &amp;#34;newline&amp;#34;. You often can&amp;#39;t type an actual Enter character on the command line because it&amp;#39;ll try to execute, so using &lt;code class="verbatim">\n&lt;/code> works better.&lt;/p>
&lt;p>
Anyway.&lt;/p>
&lt;p>
Now the bits of that paragraph each look something like this:&lt;/p>
&lt;div class="src src-html">
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-html" data-lang="html">&lt;span style="display:flex;">&lt;span> &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-pos&amp;#39;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-no&amp;#39;&lt;/span>&amp;gt;971-974&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; [INTL 1028-1031] (manga 1013-1017|V95F10-V96F3):&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span>&amp;gt;Detective &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Chiba&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; and &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Miike&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; development. &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Kuroda&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; development. &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Amuro&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; development. Plus a development for &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Yumi&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; and &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Shūkichi&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; in the background. &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-pos&amp;#39;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-no&amp;#39;&lt;/span>&amp;gt;=Main Plot=&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">p&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">li&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">li&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">p&lt;/span>&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;p>Not completely immune to overlong lines, but it&amp;#39;s something.
Now pay attention to that line that says &lt;code class="verbatim">class =&amp;#39;dc-list-no&amp;#39;&amp;gt;971-974&amp;lt;/span&amp;gt;&lt;/code>. If we go back to the browser and control-F &amp;#39;971-974&amp;#39; we find… that there are no results because the page is portioned out per hundred episodes. Let&amp;#39;s click on the 900s tab and try again.&lt;/p>
&lt;p>
Aaand it looks like this:&lt;/p>
&lt;p>
&lt;strong>971-974&lt;/strong> [INTL 1028-1031] (manga 1013-1017|V95F10-V96F3): Detective Chiba and Miike development. Kuroda development. Amuro development. Plus a development for Yumi and Shūkichi in the background. \**Main Plot*\*&lt;/p>
&lt;p>
As you can see, the author has very kindly left a keyword next to every episode number or range that does not appear in the page itself: &lt;code class="verbatim">dc-list-no&lt;/code>. Let&amp;#39;s try &lt;code class="verbatim">grep&lt;/code> ing the whole mess for that string.&lt;/p>
&lt;div class="src src-shell">
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span> curl &lt;span style="color:#0086d2">&amp;#39;https://www.xerblade.com/p/detective-conan-important-episode-list.html?m=0&amp;#39;&lt;/span> | sed &lt;span style="color:#0086d2">&amp;#39;s/&amp;gt;&amp;lt;/&amp;gt;\n&amp;lt;/g&amp;#39;&lt;/span> | grep &lt;span style="color:#0086d2">&amp;#39;dc-list-no&amp;#39;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;p>
Now we end up with blocks that look like&lt;/p>
&lt;div class="src src-html">
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-html" data-lang="html">&lt;span style="display:flex;">&lt;span> &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-no&amp;#39;&lt;/span>&amp;gt;971-974&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; [INTL 1028-1031] (manga 1013-1017|V95F10-V96F3):&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt; &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-char&amp;#39;&lt;/span>&amp;gt;Detective &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">lang&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;ja-Latn&amp;#39;&lt;/span>&amp;gt;Chiba&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-no&amp;#39;&lt;/span>&amp;gt;*Main Plot*&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;p>
Hmmm. Not perfect. But we&amp;#39;re getting there. Most lines now either contain the episode numbers like we want, or not much numbers at all. There are some like&lt;/p>
&lt;div class="src src-html">
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-html" data-lang="html">&lt;span style="display:flex;">&lt;span> &amp;lt;&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span> &lt;span style="color:#ff0086;font-weight:bold">class&lt;/span>=&lt;span style="color:#0086d2">&amp;#39;dc-list-no&amp;#39;&lt;/span>&amp;gt;(Both 1 Hour Specials)&amp;lt;/&lt;span style="color:#fb660a;font-weight:bold">span&lt;/span>&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;p>but that&amp;#39;s probably alright as you&amp;#39;ll see.&lt;/p>
&lt;p>
—-&lt;/p>
&lt;p>
What we can do now is filter for the numbers themselves. We know that there are &lt;code class="verbatim">&amp;gt;&amp;lt;&lt;/code> around the numbers, and they can be in either &lt;code class="verbatim">XYY-XYZ&lt;/code> format, or just a single number.&lt;/p>
&lt;p>
In extended regex, a sequence in &lt;code class="verbatim">[square brackets]&lt;/code> denotes a set of possible matches of each character. So, for example, &lt;code class="verbatim">[ckq]&lt;/code> will match a lowercase c, or a lowercase k, or a lowercase q. The spec also allows for comon ranges, like &lt;code class="verbatim">[A-Z]&lt;/code> (any uppercase letter), &lt;code class="verbatim">[a-z]&lt;/code> (any lowercase letter), or for our use case, &lt;code class="verbatim">[0-9]&lt;/code>, any single number digit.&lt;/p>
&lt;p>
So we can &lt;/p>
&lt;div class="src src-shell">
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span> curl &lt;span style="color:#0086d2">&amp;#39;https://www.xerblade.com/p/detective-conan-important-episode-list.html?m=0&amp;#39;&lt;/span> | sed &lt;span style="color:#0086d2">&amp;#39;s/&amp;gt;&amp;lt;/&amp;gt;\n&amp;lt;/g&amp;#39;&lt;/span> | grep &lt;span style="color:#0086d2">&amp;#39;dc-list-no&amp;#39;&lt;/span> | sed &amp;#39;s/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;p>
… This is never getting finished. I don&amp;#39;t have the time or energy.&lt;/p>
&lt;p>
Here&amp;#39;s a better version by the legendary Chokerman:&lt;/p>
&lt;div class="src src-shell">
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span> curl -s &lt;span style="color:#0086d2">&amp;#39;https://www.xerblade.com/p/detective-conan-important-episode-list.html?m=0&amp;#39;&lt;/span>|grep -Eo &lt;span style="color:#0086d2">&amp;#34;dc-list-no\&amp;#39;&amp;gt;[0-9].*?&amp;lt;&amp;#34;&lt;/span>|sed -nr &lt;span style="color:#0086d2">&amp;#39;s/.*&amp;gt;(.*)&amp;lt;.*/\1/p&amp;#39;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;p>(inciting incident &lt;a href="https://github.com/pystardust/ani-cli/issues/723">here&lt;/a>)&lt;/p>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div></description></item></channel></rss>